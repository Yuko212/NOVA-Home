<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciar Casa - NOVA</title>
    <link rel="stylesheet" href="casa.css">
</head>
<body>
    <header>
        <img src="logo.png" alt="Logo" class="logo">
        <h1>Gerenciar Casa</h1>
    </header>

    <nav id="side-nav" class="side-nav">
        <a href="javascript:void(0)" class="close-btn" id="close-btn">&times;</a>
        <a href="perfil.html">Perfil</a>
        <a href="preferencias.html">Preferências</a>
        <a href="sensores.html">Sensores</a>
        <a href="casa.html" class="active">Casa</a>
    </nav>

    <main>
        <section id="add-comodo">
            <h2>Adicionar Cômodo</h2>
            <form action="cadastrar_comodo.php" method="POST">
                <div class="form-group">
                    <label for="comodo">Nome do Cômodo:</label>
                    <input type="text" id="comodo" name="comodo" required>
                </div>
                <div class="form-group">
                    <label for="tipo">Tipo de Cômodo:</label>
                    <select id="tipo" name="tipo" required>
                        <option value="quarto">Quarto</option>
                        <option value="banheiro">Banheiro</option>
                        <option value="sala">Sala</option>
                        <option value="cozinha">Cozinha</option>
                        <option value="lavanderia">Lavanderia</option>
                        <option value="outro">Outro (especificar)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="dimensoes">Dimensões do Cômodo (em metros):</label>
                    <input type="text" id="dimensoes" name="dimensoes" pattern="\d+(\.\d+)?x\d+(\.\d+)?x\d+(\.\d+)?" placeholder="Ex: 5x7x3.5" required>
                    <small>Formato: largura x comprimento x altura</small>
                </div>
                <button type="submit" class="btn">Adicionar Cômodo</button>
            </form>
        </section>

        <section id="pre-cadastrados">
            <h2>Cômodos Pré-Cadastrados</h2>
            <div class="comodo-container">
                <div class="comodo-item" data-comodo="quarto">Quarto</div>
                <div class="comodo-item" data-comodo="banheiro">Banheiro</div>
                <div class="comodo-item" data-comodo="sala">Sala</div>
                <div class="comodo-item" data-comodo="hall">Hall de Entrada</div>
                <div class="comodo-item" data-comodo="varanda">Varanda</div>
                <div class="comodo-item" data-comodo="cozinha">Cozinha</div>
            </div>
        </section>

        <section id="house-plan">
            <h2>Planta da Casa</h2>
            <img src="PLANTA.png" alt="Planta da Casa" width="600">
        </section>
    </main>

    <footer>
        <p>&copy; 2024 NOVA. Todos os direitos reservados.</p>
    </footer>

    <!-- Pop-up para editar cômodos -->
    <div id="editPopup" class="popup">
        <div class="popup-content">
            <span class="close-btn" onclick="closeEditPopup()">&times;</span>
            <h2>Editar Cômodo</h2>
            <form id="editForm">
                <div class="form-group">
                    <label for="comodo-name">Nome do Cômodo:</label>
                    <input type="text" id="comodo-name" name="comodo-name" required>
                </div>
                <div class="form-group">
                    <label for="comodo-type">Tipo de Cômodo:</label>
                    <select id="comodo-type" name="comodo-type">
                        <option value="quarto">Quarto</option>
                        <option value="sala">Sala</option>
                        <option value="cozinha">Cozinha</option>
                        <!-- Adicione outros tipos de cômodos conforme necessário -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="has-sensors">Há sensores?</label>
                    <select id="has-sensors" name="has-sensors" onchange="toggleSensorDescription()">
                        <option value="não">Não</option>
                        <option value="sim">Sim</option>
                    </select>
                </div>
                <div id="sensor-description-container" style="display: none;">
                    <label for="sensor-description">Descrição do Sensor:</label>
                    <input type="text" id="sensor-description" name="sensor-description">
                </div>
                <div id="profile-picture-container" style="display: none;">
                    <label for="profile-picture">Foto de Perfil:</label>
                    <input type="file" id="profile-picture" name="profile-picture" accept="image/*">
                </div>
                <div id="room-owner-container" style="display: none;">
                    <label for="room-owner">Dono do Quarto:</label>
                    <input type="text" id="room-owner" name="room-owner">
                </div>
                <button type="submit" class="btn">Salvar</button>
            </form>
        </div>
    </div>

    <!-- Funções JavaScript para gerenciar o pop-up -->
    <script>
        function toggleSensorDescription() {
            var hasSensors = document.getElementById('has-sensors').value;
            var sensorDescriptionContainer = document.getElementById('sensor-description-container');
            var profilePictureContainer = document.getElementById('profile-picture-container');
            var roomOwnerContainer = document.getElementById('room-owner-container');

            if (hasSensors === 'sim') {
                sensorDescriptionContainer.style.display = 'block';
            } else {
                sensorDescriptionContainer.style.display = 'none';
            }

            var comodoType = document.getElementById('comodo-type').value;
            if (comodoType === 'quarto') {
                profilePictureContainer.style.display = 'block';
                roomOwnerContainer.style.display = 'block';
            } else {
                profilePictureContainer.style.display = 'none';
                roomOwnerContainer.style.display = 'none';
            }
        }

        function openEditPopup(comodo) {
            // Preencher o formulário com os dados do cômodo
            document.getElementById('comodo-name').value = comodo.name;
            document.getElementById('comodo-type').value = comodo.type;
            document.getElementById('has-sensors').value = comodo.hasSensors ? 'sim' : 'não';
            document.getElementById('sensor-description').value = comodo.sensorDescription || '';

            // Exibir ou ocultar as seções conforme o tipo de cômodo
            toggleSensorDescription();

            // Mostrar o pop-up
            document.getElementById('editPopup').classList.add('active');
        }

        function closeEditPopup() {
            document.getElementById('editPopup').classList.remove('active');
        }
    </script>

    <script src="casa.js"></script>
</body>
</html>
